<script type="text/javascript">
    chrome.browserAction.onClicked.addListener(doAction);

    function doAction(tab){

        chrome.tabs.getSelected(null, function(tab) {
            console.log('sending request');
            chrome.tabs.sendRequest(tab.id, {"test" : "value"}, function(response) {
                console.log('response received');
            });
        });

    }
</script>